(self.webpackChunkjupyter_leaflet=self.webpackChunkjupyter_leaflet||[]).push([[138],{8581:(e,t,i)=>{(t=i(5879)(!1)).push([e.id,"/* Copyright (c) Jupyter Development Team.\n * Distributed under the terms of the Modified BSD License.\n */\n\n.leaflet-container {\n  height: 100%;\n  width: 100%;\n}\n\n.jupyter-widgets.leaflet-widgets {\n  height: 400px;\n  overflow: hidden;\n  flex: 1 1 auto;\n}\n\n.jp-LinkedOutputView .jupyter-widgets.leaflet-widgets {\n  min-height: 360px; /* Min-height required for mirred output in jlab < 0.31.6 */\n  height: 100%;\n}\n\n/* Leaflet crispness override */\n.crisp-image {\n  /* Preserve crisp pixels with scaled up images */\n  image-rendering: optimizeSpeed; /* Legal fallback */\n  image-rendering: -moz-crisp-edges; /* Firefox        */\n  image-rendering: -o-crisp-edges; /* Opera          */\n  image-rendering: -webkit-optimize-contrast; /* Safari         */\n  image-rendering: optimize-contrast; /* CSS3 Proposed  */\n  image-rendering: crisp-edges; /* CSS4 Proposed  */\n  image-rendering: pixelated; /* CSS4 Proposed  */\n  -ms-interpolation-mode: nearest-neighbor; /* IE8+           */\n}\n\n/* JupyterLab themes support */\n/* Popup */\n.leaflet-popup-content-wrapper,\n.leaflet-popup-tip {\n  background-color: var(--jp-layout-color1);\n  color: var(--jp-ui-font-color1);\n  border-width: var(--jp-border-width);\n  border-color: var(--jp-border-color1);\n}\n\n/* Basic controls */\n.leaflet-bar a,\n.leaflet-bar a:hover {\n  background-color: var(--jp-layout-color1);\n  color: var(--jp-ui-font-color1);\n  border-width: var(--jp-border-width);\n  border-color: var(--jp-border-color1);\n}\n\n.leaflet-bar a:hover {\n  background-color: var(--jp-layout-color2);\n  color: var(--jp-ui-font-color2);\n}\n\n.leaflet-bar a.leaflet-disabled {\n  background-color: var(--jp-layout-color3);\n  color: var(--jp-ui-font-color3);\n}\n\n/* Widget control */\n.leaflet-widgetcontrol {\n  background: var(--jp-layout-color1);\n  border-radius: 4.5px;\n  box-shadow: 4px 5px 8px 0px #9e9e9e;\n}\n\n/* SplitMap control */\n.leaflet-sbs-divider {\n  background-color: var(--jp-layout-color1);\n}\n\n.leaflet-sbs-range::-webkit-slider-thumb {\n  background-color: var(--jp-layout-color1);\n  border-width: var(--jp-border-width);\n  border-color: var(--jp-border-color1);\n}\n\n.leaflet-sbs-range::-ms-thumb {\n  background-color: var(--jp-layout-color1);\n  border-width: var(--jp-border-width);\n  border-color: var(--jp-border-color1);\n}\n\n.leaflet-sbs-range::-moz-range-thumb {\n  background-color: var(--jp-layout-color1);\n  border-width: var(--jp-border-width);\n  border-color: var(--jp-border-color1);\n}\n\n/* Measure control */\n.leaflet-control-measure {\n  background-color: var(--jp-layout-color1);\n  border-width: var(--jp-border-width);\n  border-color: var(--jp-border-color1);\n  color: var(--jp-ui-font-color1);\n}\n\n/* Layers control */\n.leaflet-control-layers {\n  background-color: var(--jp-layout-color1);\n  border-width: var(--jp-border-width);\n  border-color: var(--jp-border-color1);\n  color: var(--jp-ui-font-color1);\n}\n\n.leaflet-control-layers-expanded {\n  background-color: var(--jp-layout-color1);\n  border-width: var(--jp-border-width);\n  border-color: var(--jp-border-color1);\n  color: var(--jp-ui-font-color1);\n}\n\n/* Attribution control */\n.leaflet-container .leaflet-control-attribution {\n  background-color: var(--jp-layout-color1);\n  border-width: var(--jp-border-width);\n  border-color: var(--jp-border-color1);\n  color: var(--jp-ui-font-color1);\n}\n\n.leaflet-control-velocity.leaflet-control {\n  background: var(--jp-layout-color1);\n  margin: 0;\n  padding: 0 5px;\n  color: var(--jp-ui-font-color1);\n  font-size: 11px;\n}\n\n/* Legend Control */\ndiv.leaflet-control-legend {\n  color: var(--jp-ui-font-color1);\n  line-height: 18px;\n  width: auto;\n  background-color: var(--jp-layout-color1);\n  border-width: var(--jp-border-width);\n  border-color: var(--jp-border-color1);\n  border-radius: 4.5px;\n  box-shadow: 0 1px 5px rgba(0, 0, 0, 0.4);\n  padding: 6px 10px 6px 6px;\n}\n\ndiv.leaflet-control-legend > h4 {\n  padding: 0;\n  margin: 0;\n  margin-bottom: 5px;\n}\n\ndiv.leaflet-control-legend > i {\n  width: 18px;\n  height: 18px;\n  float: left;\n  margin-right: 8px;\n}\n\ndiv.leaflet-control-legend > p {\n  display: inline-block;\n}\n\n/* Magnifying Glass */\n.leaflet-magnifying-glass {\n  border-radius: 50%;\n  border: 1px solid gray;\n  box-shadow: 0 0 5px gray;\n  position: absolute;\n  overflow: hidden;\n  -moz-box-sizing: border-box;\n  box-sizing: border-box;\n}\n\n.leaflet-magnifying-glass > .leaflet-container {\n  height: 100%;\n  width: 100%;\n}\n\n/* Webkit-only workaround for the border-radius clipping bug,\napplied to the map container */\n.leaflet-magnifying-glass-webkit {\n  border-radius: 50%;\n  -webkit-mask-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAIAAACQd1PeAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAA5JREFUeNpiYGBgAAgwAAAEAAGbA+oJAAAAAElFTkSuQmCC);\n}\n",""]),e.exports=t},907:(e,t,i)=>{var o=i(3379),s=i(8581);"string"==typeof(s=s.__esModule?s.default:s)&&(s=[[e.id,s,""]]);o(s,{insert:"head",singleton:!1}),e.exports=s.locals||{}},5195:(e,t,i)=>{"use strict";i.r(t),i.d(t,{LeafletControlModel:()=>n,LeafletControlView:()=>l});const o=i(1395),s=i(8197),a=i(3555);class n extends o.WidgetModel{defaults(){return{...super.defaults(),_view_name:"LeafletControlView",_model_name:"LeafletControlModel",_view_module:"jupyter-leaflet",_model_module:"jupyter-leaflet",options:[],position:"topleft"}}}class l extends a.LeafletWidgetView{initialize(e){super.initialize(e),this.map_view=this.options.map_view}render(){return Promise.resolve(this.create_obj()).then((()=>{this.leaflet_events(),this.model_events()}))}leaflet_events(){}model_events(){for(var e,t=this.model.get("options"),i=0;i<t.length;i++)e=t[i],this.listenTo(this.model,"change:"+e,(function(){s.setOptions(this.obj,this.get_options())}),this)}}},8138:(e,t,i)=>{var o=window.L;e.exports=i(1640),e.exports.version=i(4147).version,void 0!==o&&o!==window.L&&(console.log("Existing `L` detected, running ipyleaflet's Leaflet in no-conflict mode as `ipyL`"),ipyL=L.noConflict())},1640:(e,t,i)=>{"use strict";i.r(t),i.d(t,{LeafletAntPathModel:()=>be,LeafletAntPathView:()=>je,LeafletAttributionControlModel:()=>Xe,LeafletAttributionControlView:()=>$e,LeafletAwesomeIconModel:()=>g,LeafletAwesomeIconView:()=>f,LeafletCircleMarkerModel:()=>Pe.LeafletCircleMarkerModel,LeafletCircleMarkerView:()=>Pe.LeafletCircleMarkerView,LeafletCircleModel:()=>Se,LeafletCircleView:()=>Ae,LeafletControlModel:()=>et.LeafletControlModel,LeafletControlView:()=>et.LeafletControlView,LeafletDivIconModel:()=>Qe,LeafletDivIconView:()=>qe,LeafletDrawControlModel:()=>Lt,LeafletDrawControlView:()=>vt,LeafletFeatureGroupModel:()=>We.LeafletFeatureGroupModel,LeafletFeatureGroupView:()=>We.LeafletFeatureGroupView,LeafletFullScreenControlModel:()=>bt,LeafletFullScreenControlView:()=>jt,LeafletGeoJSONModel:()=>Be,LeafletGeoJSONView:()=>Ne,LeafletHeatmapModel:()=>_e,LeafletHeatmapView:()=>ge,LeafletIconModel:()=>p,LeafletIconView:()=>c,LeafletImageOverlayModel:()=>q,LeafletImageOverlayView:()=>K,LeafletImageServiceModel:()=>ae,LeafletImageServiceView:()=>ne,LeafletLayerGroupModel:()=>Ee.LeafletLayerGroupModel,LeafletLayerGroupView:()=>Ee.LeafletLayerGroupView,LeafletLayerModel:()=>o.LeafletLayerModel,LeafletLayerView:()=>o.LeafletLayerView,LeafletLayersControlModel:()=>dt,LeafletLayersControlView:()=>ht,LeafletLegendControlModel:()=>Ft,LeafletLegendControlView:()=>Zt,LeafletLocalTileLayerModel:()=>S,LeafletLocalTileLayerView:()=>A,LeafletMagnifyingGlassModel:()=>B,LeafletMagnifyingGlassView:()=>N,LeafletMapModel:()=>ti,LeafletMapStyleModel:()=>ei,LeafletMapView:()=>ii,LeafletMarkerClusterModel:()=>Re,LeafletMarkerClusterView:()=>Ge,LeafletMarkerModel:()=>r,LeafletMarkerView:()=>d,LeafletMeasureControlModel:()=>ct,LeafletMeasureControlView:()=>ut,LeafletPathModel:()=>Le.LeafletPathModel,LeafletPathView:()=>Le.LeafletPathView,LeafletPolygonModel:()=>xe.LeafletPolygonModel,LeafletPolygonView:()=>xe.LeafletPolygonView,LeafletPolylineModel:()=>Me.LeafletPolylineModel,LeafletPolylineView:()=>Me.LeafletPolylineView,LeafletPopupModel:()=>x,LeafletPopupView:()=>C,LeafletRasterLayerModel:()=>V.LeafletRasterLayerModel,LeafletRasterLayerView:()=>V.LeafletRasterLayerView,LeafletRectangleModel:()=>ze,LeafletRectangleView:()=>ke,LeafletScaleControlModel:()=>Rt,LeafletScaleControlView:()=>Gt,LeafletSearchControlModel:()=>Ht,LeafletSearchControlView:()=>Qt,LeafletSplitMapControlModel:()=>st,LeafletSplitMapControlView:()=>nt,LeafletTileLayerModel:()=>z.LeafletTileLayerModel,LeafletTileLayerView:()=>z.LeafletTileLayerView,LeafletUILayerModel:()=>o.LeafletUILayerModel,LeafletUILayerView:()=>o.LeafletUILayerView,LeafletVectorLayerModel:()=>fe.LeafletVectorLayerModel,LeafletVectorLayerView:()=>fe.LeafletVectorLayerView,LeafletVectorTileLayerModel:()=>P,LeafletVectorTileLayerView:()=>T,LeafletVelocityModel:()=>he,LeafletVelocityView:()=>me,LeafletVideoOverlayModel:()=>ee,LeafletVideoOverlayView:()=>te,LeafletWMSLayerModel:()=>R,LeafletWMSLayerView:()=>G,LeafletWidgetControlModel:()=>Pt,LeafletWidgetControlView:()=>Tt,LeafletZoomControlModel:()=>At,LeafletZoomControlView:()=>It});var o=i(4795);const s=i(1395),a=i(8197),n=i(4795),l=[0,0];class r extends n.LeafletUILayerModel{defaults(){return{...super.defaults(),_view_name:"LeafletMarkerView",_model_name:"LeafletMarkerModel",location:l,opacity:1,visible:!0,z_index_offset:0,draggable:!0,keyboard:!0,title:"",alt:"",rise_on_hover:!1,rise_offset:250,rotation_angle:0,rotation_origin:"",icon:null}}}r.serializers={...n.LeafletUILayerModel.serializers,icon:{deserialize:s.unpack_models}};class d extends n.LeafletUILayerView{initialize(e){super.initialize(e),this.icon_promise=Promise.resolve()}create_obj(){this.obj=a.marker(this.model.get("location"),this.get_options()),this.obj.on("dragend",(e=>{var t=e.target.getLatLng();this.model.set("location",[t.lat,t.lng]),this.touch()}))}remove(){super.remove(),this.icon_promise.then((()=>{this.icon&&this.icon.remove()}))}set_icon(e){this.icon&&this.icon.remove(),e&&(this.icon_promise=this.icon_promise.then((()=>this.create_child_view(e).then((e=>{this.obj.setIcon(e.obj),this.icon=e})))))}model_events(){super.model_events(),this.listenTo(this.model,"change:location",(function(){this.obj.setLatLng(this.model.get("location")),this.send({event:"move",location:this.model.get("location")})}),this),this.listenTo(this.model,"change:z_index_offset",(function(){this.obj.setZIndexOffset(this.model.get("z_index_offset"))}),this),this.listenTo(this.model,"change:opacity",(function(){this.model.get("visible")&&this.obj.setOpacity(this.model.get("opacity"))}),this),this.listenTo(this.model,"change:visible",(function(){this.model.get("visible")?this.obj.setOpacity(this.model.get("opacity")):this.obj.setOpacity(0)}),this),this.listenTo(this.model,"change:rotation_angle",(function(){this.obj.setRotationAngle(this.model.get("rotation_angle"))}),this),this.listenTo(this.model,"change:rotation_origin",(function(){this.obj.setRotationOrigin(this.model.get("rotation_origin"))}),this),this.obj.setLatLng(this.model.get("location")),this.obj.setZIndexOffset(this.model.get("z_index_offset")),this.model.get("visible")?this.obj.setOpacity(this.model.get("opacity")):this.obj.setOpacity(0),this.obj.setRotationAngle(this.model.get("rotation_angle")),this.obj.setRotationOrigin(this.model.get("rotation_origin")),this.listenTo(this.model,"change:icon",(function(){this.set_icon(this.model.get("icon"))}),this),this.set_icon(this.model.get("icon"))}}const h=i(8197),m=i(4795);class p extends m.LeafletUILayerModel{defaults(){return{...super.defaults(),_view_name:"LeafletIconView",_model_name:"LeafletIconModel",icon_url:"",shadow_url:"",icon_size:null,shadow_size:null,icon_anchor:null,shadow_anchor:null,popup_anchor:[0,0]}}}class c extends m.LeafletUILayerView{create_obj(){this.obj=h.icon(this.get_options())}}const u=i(8197),_=i(4795);class g extends _.LeafletUILayerModel{defaults(){return{...super.defaults(),_view_name:"LeafletAwesomeIconView",_model_name:"LeafletAwesomeIconModel",name:"home",marker_color:"blue",icon_color:"blue",spin:!1}}}class f extends _.LeafletUILayerView{create_obj(){this.obj=u.AwesomeMarkers.icon({prefix:"fa",icon:this.model.get("name"),markerColor:this.model.get("marker_color"),iconColor:this.model.get("icon_color"),spin:this.model.get("spin")})}}const v=i(1395),y=i(8197),w=i(4795),b=i(2720),j=i(8832),M=[0,0];class x extends w.LeafletUILayerModel{defaults(){return{...super.defaults(),_view_name:"LeafletPopupView",_model_name:"LeafletPopupModel",location:M,child:null,min_width:50,max_width:300,max_height:null}}}x.serializers={...w.LeafletUILayerModel.serializers,child:{deserialize:v.unpack_models}};class C extends w.LeafletUILayerView{create_obj(){this.obj=y.popup(this.get_options()).setLatLng(this.model.get("location")),this.model.on("msg:custom",this.handle_message.bind(this))}initialize(e){super.initialize(e),this.child_promise=Promise.resolve()}render(){return super.render(),this.set_child(this.model.get("child"))}remove(){super.remove(),this.child_promise.then((()=>{this.child&&this.child.remove()}))}set_child(e){return this.child&&this.child.remove(),e&&(this.child_promise=this.child_promise.then((()=>this.create_child_view(e).then((e=>{b.MessageLoop.sendMessage(e.pWidget,j.Widget.Msg.BeforeAttach),this.obj.setContent(e.el),b.MessageLoop.sendMessage(e.pWidget,j.Widget.Msg.AfterAttach),this.force_update(),this.child=e,this.trigger("child:created")}))))),this.child_promise}leaflet_events(){super.leaflet_events(),this.obj.on("add",(()=>{window.dispatchEvent(new Event("resize"))}))}model_events(){super.model_events(),this.model.on("change:child",(()=>{this.set_child(this.model.get("child"))})),this.model.on_some_change(["min_width","max_width","max_height"],this.update_popup,this)}update_popup(){y.setOptions(this.obj,this.get_options()),this.force_update()}force_update(){this.map_view.obj.hasLayer(this.obj)?(this.map_view.obj.closePopup(this.obj),this.map_view.obj.openPopup(this.obj)):(this.map_view.obj.openPopup(this.obj),this.map_view.obj.closePopup(this.obj))}handle_message(e){"open"==e.msg?this.map_view.obj.openPopup(this.obj,e.location):"close"==e.msg&&this.map_view.obj.closePopup(this.obj)}}var V=i(6004),z=i(6231);const k=i(4795);class P extends k.LeafletLayerModel{defaults(){return{...super.defaults(),_view_name:"LeafletVectorTileLayerView",_model_name:"LeafletVectorTileLayerModel",url:"",vectorTileLayerStyles:{}}}}class T extends k.LeafletLayerView{create_obj(){var e={...this.get_options(),rendererFactory:L.canvas.tile};this.obj=L.vectorGrid.protobuf(this.model.get("url"),e),this.model.on("msg:custom",this.handle_message.bind(this))}model_events(){super.model_events(),this.listenTo(this.model,"change:url",(function(){this.obj.setUrl(this.model.get("url"))}),this)}handle_message(e){"redraw"==e.msg&&this.obj.redraw()}}const O=i(6231);class S extends O.LeafletTileLayerModel{defaults(){return{...super.defaults(),_view_name:"LeafletLocalTileLayerView",_model_name:"LeafletLocalTileLayerModel",path:""}}}class A extends O.LeafletTileLayerView{create_obj(){this.model.set("url",this.model.get("path")),this.model.save_changes(),super.create_obj()}}const I=i(8197),U=i(6231),D=i(4382);class R extends U.LeafletTileLayerModel{defaults(){return{...super.defaults(),_view_name:"LeafletWMSLayerView",_model_name:"LeafletWMSLayerModel",layers:"",styles:"",format:"image/jpeg",transparent:!1,crs:null,uppercase:!1}}}class G extends U.LeafletTileLayerView{create_obj(){this.obj=I.tileLayer.wms(this.model.get("url"),{...this.get_options(),crs:D.getProjection(this.model.get("crs"))})}model_events(){for(var e in super.model_events(),this.get_options())this.model.on("change:"+e,(()=>{this.obj.setParams(this.get_options(),!0),this.obj.refresh()}))}}const E=i(1395),W=i(8197),F=i(6004),Z=i(4795);class B extends F.LeafletRasterLayerModel{defaults(){return{...super.defaults(),_view_name:"LeafletMagnifyingGlassView",_model_name:"LeafletMagnifyingGlassModel",radius:100,zoomOffset:3,fixedZoom:-1,fixedPosition:!1,latLng:[],layers:[]}}}B.serializers={...E.WidgetModel.serializers,layers:{deserialize:E.unpack_models}};class N extends Z.LeafletLayerView{remove_layer_view(e){e.remove()}add_layer_model(e){return this.create_child_view(e).then((e=>e.obj))}create_obj(){this.layer_views=new E.ViewList(this.add_layer_model,this.remove_layer_view,this);var e=this.get_options().layers;return this.layer_views.update(e).then((e=>{var t=this.get_options();t.layers=e,this.obj=W.magnifyingGlass(t)}))}model_events(){var e;super.model_events();for(var t=this.model.get("options"),i=0;i<t.length;i++)e=t[i],this.listenTo(this.model,"change:"+e,(function(){this.map_view.obj.removeLayer(this.obj),this.create_obj().then((()=>{this.map_view.obj.addLayer(this.obj)}))}),this)}}const J=i(8197),H=i(6004),Q=[0,0];class q extends H.LeafletRasterLayerModel{defaults(){return{...super.defaults(),_view_name:"LeafletImageOverlayView",_model_name:"LeafletImageOverlayModel",url:"",bounds:[Q,Q],attribution:""}}}class K extends H.LeafletRasterLayerView{create_obj(){this.obj=J.imageOverlay(this.model.get("url"),this.model.get("bounds"),this.get_options())}model_events(){super.model_events(),this.listenTo(this.model,"change:url",(function(){const e=this.model.get("url");this.obj.setUrl(e)}),this),this.listenTo(this.model,"change:bounds",(function(){const e=this.model.get("bounds");this.obj.setBounds(e)}),this)}}const Y=i(8197),X=i(6004),$=[0,0];class ee extends X.LeafletRasterLayerModel{defaults(){return{...super.defaults(),_view_name:"LeafletVideoOverlayView",_model_name:"LeafletVideoOverlayModel",url:"",bounds:[$,$],attribution:""}}}class te extends X.LeafletRasterLayerView{create_obj(){this.obj=Y.videoOverlay(this.model.get("url"),this.model.get("bounds"),this.get_options()),this.obj.on("load",(()=>{var e=Y.Control.extend({onAdd:()=>{var e=Y.DomUtil.create("button");return e.innerHTML="&#10074&#10074",Y.DomEvent.on(e,"click",(()=>{this.obj.getElement().pause()})),e}}),t=Y.Control.extend({onAdd:()=>{var e=Y.DomUtil.create("button");return e.innerHTML="&#9658",Y.DomEvent.on(e,"click",(()=>{this.obj.getElement().play()})),e}});(new e).addTo(this.map_view.obj),(new t).addTo(this.map_view.obj)}))}model_events(){super.model_events(),this.listenTo(this.model,"change:url",(function(){const e=this.model.get("url"),t=this.model.get("bounds"),i=this.get_options();this.map_view.obj.removeLayer(this.obj),this.obj=Y.videoOverlay(e,t,i),this.map_view.obj.addLayer(this.obj)}),this),this.listenTo(this.model,"change:bounds",(function(){const e=this.model.get("url"),t=this.model.get("bounds"),i=this.get_options();this.map_view.obj.removeLayer(this.obj),this.obj=Y.videoOverlay(e,t,i),this.map_view.obj.addLayer(this.obj)}),this)}}const ie=i(8197),oe=i(4795),se=i(4382);class ae extends oe.LeafletLayerModel{defaults(){return{...super.defaults(),_view_name:"LeafletImageServiceView",_model_name:"LeafletImageServiceModel",url:"",f:"image",format:"jpgpng",pixelType:"UNKNOWN",noData:[],noDataInterpretation:"",interpolation:"",compressionQuality:"",bandIds:[],time:[],renderingRule:{},mosaicRule:{},endpoint:"",attribution:"",crs:null,interactive:!1,updateInterval:200}}}class ne extends oe.LeafletLayerView{create_obj(){this.obj=ie.imageService({url:this.model.get("url"),...this.get_options(),crs:se.getProjection(this.model.get("crs"))})}model_events(){for(var e in super.model_events(),this.model.on("change:url",(()=>{this.obj._update()})),this.get_options())this.model.on("change:"+e,(()=>{this.obj._update()}))}}const le=i(8197),re=i(4795),de=i(3555);class he extends re.LeafletLayerModel{defaults(){return{...super.defaults(),_view_name:"LeafletVelocityView",_model_name:"LeafletVelocityModel",displayValues:!0,displayOptions:{velocityType:"Global Wind",position:"bottomleft",emptyString:"No velocity data",angleConvention:"bearingCW",displayPosition:"bottomleft",displayEmptyString:"No velocity data",speedUnit:"kt"},data:[],minVelocity:0,maxVelocity:10,velocityScale:.005,colorScale:[]}}}class me extends re.LeafletLayerView{create_obj(){var e=this.get_options();e.data=this.model.get("data"),this.obj=le.velocityLayer(e)}model_events(){super.model_events(),this.listenTo(this.model,"change:data",(function(){const e=this.model.get("data");this.obj.setData(e)}),this);var e="display_options";this.listenTo(this.model,"change:"+e,(function(){var t={};t[de.camel_case(e)]={...this.model.get(e)},le.setOptions(this.obj,t)}),this)}}const pe=i(8197),ce=i(6004),ue=i(4795);class _e extends ce.LeafletRasterLayerModel{defaults(){return{...super.defaults(),_view_name:"LeafletHeatmapView",_model_name:"LeafletHeatmapModel",locations:[],minOpacity:.05,maxZoom:18,max:1,radius:25,blur:15,gradient:{.4:"blue",.6:"cyan",.7:"lime",.8:"yellow",1:"red"}}}}class ge extends ue.LeafletLayerView{create_obj(){this.obj=pe.heatLayer(this.model.get("locations"),this.get_options())}model_events(){super.model_events(),this.listenTo(this.model,"change:locations",(function(){this.obj.setLatLngs(this.model.get("locations"))}),this)}}var fe=i(2610),Le=i(5529);const ve=i(8197),ye=i(2610),{antPath:we}=i(5432);class be extends ye.LeafletVectorLayerModel{defaults(){return{...super.defaults(),_view_name:"LeafletAntPathView",_model_name:"LeafletAntPathModel",use:"polyline",delay:400,weight:5,dash_array:[10,20],color:"#0000FF",pulse_color:"#FFFFFF",paused:!1,reverse:!1,hardware_accelerated:!1,radius:10}}}class je extends ye.LeafletVectorLayerView{create_obj(){this.obj=we(this.model.get("locations"),this.get_ant_options())}model_events(){super.model_events(),this.listenTo(this.model,"change:locations",(function(){this.obj.setLatLngs(this.model.get("locations"))}),this),this.model.on_some_change(this.model.get("options"),(()=>{this.obj.setStyle(this.get_ant_options())})),this.obj.setStyle(this.get_ant_options())}get_ant_options(){const e=this.get_options();return"circle"!=e.use&&delete e.radius,e.use=ve[e.use],e}}var Me=i(9770),xe=i(5321);const Ce=i(8197),Ve=i(5321);class ze extends Ve.LeafletPolygonModel{defaults(){return{...super.defaults(),_view_name:"LeafletRectangleView",_model_name:"LeafletRectangleModel",bounds:[]}}}class ke extends Ve.LeafletPolygonView{create_obj(){this.obj=Ce.rectangle(this.model.get("bounds"),this.get_options())}}var Pe=i(587);const Te=i(8197),Oe=i(587);class Se extends Oe.LeafletCircleMarkerModel{defaults(){return{...super.defaults(),_view_name:"LeafletCircleView",_model_name:"LeafletCircleModel"}}}class Ae extends Oe.LeafletCircleMarkerView{create_obj(){this.obj=Te.circle(this.model.get("location"),this.get_options())}model_events(){super.model_events(),this.listenTo(this.model,"change:radius",(function(){this.obj.setRadius(this.get_options().radius)}),this)}}const Ie=i(1395),Ue=i(8197),De=i(4795);class Re extends De.LeafletLayerModel{defaults(){return{...super.defaults(),_view_name:"LeafletMarkerClusterView",_model_name:"LeafletMarkerClusterModel",markers:[],disableClusteringAtZoom:18,maxClusterRadius:80}}}Re.serializers={...Ie.WidgetModel.serializers,markers:{deserialize:Ie.unpack_models}};class Ge extends De.LeafletLayerView{model_events(){super.model_events(),this.listenTo(this.model,"change:markers",(e=>{this.marker_views.update(e.get("markers"))}),this)}remove_layer_view(e){this.obj.removeLayer(e.obj),e.remove()}add_layer_model(e){return this.create_child_view(e,{map_view:this.map_view}).then((e=>(this.obj.addLayer(e.obj),e)))}create_obj(){var e=this.get_options();this.obj=Ue.markerClusterGroup(e),this.marker_views=new Ie.ViewList(this.add_layer_model,this.remove_layer_view,this),this.marker_views.update(this.model.get("markers"))}}var Ee=i(6464),We=i(3090);const Fe=i(8197),Ze=i(3090);class Be extends Ze.LeafletFeatureGroupModel{defaults(){return{...super.defaults(),_view_name:"LeafletGeoJSONView",_model_name:"LeafletGeoJSONModel",data:{},style:{},visible:!0,hover_style:{},point_style:{}}}}class Ne extends Ze.LeafletFeatureGroupView{create_obj(){var e={style:e=>{const t=this.model.get("style");return{...e.properties.style||{},...t}},onEachFeature:(e,t)=>{var i=i=>{"mouseover"==i.type&&(t.setStyle(this.model.get("hover_style")),t.once("mouseout",(()=>{this.obj.resetStyle(t)}))),this.send({event:i.type,feature:e,properties:e.properties,id:e.id})};t.on({mouseover:i,click:i})}},t=this.model.get("point_style");0!==Object.keys(t).length&&(e.pointToLayer=function(e,i){return new Fe.CircleMarker(i,t)}),this.obj=Fe.geoJson(this.model.get("data"),e)}model_events(){this.listenTo(this.model,"change:style",(function(){this.obj.setStyle(this.model.get("style"))}),this),this.listenTo(this.model,"change:data",(function(){this.obj.clearLayers(),this.obj.addData(this.model.get("data"))}),this),this.listenTo(this.model,"change:visible",(function(){this.model.get("visible")?this.obj.addData(this.model.get("data")):this.obj.clearLayers()}),this)}}const Je=i(8197),He=i(4795);class Qe extends He.LeafletUILayerModel{defaults(){return{...super.defaults(),_view_name:"LeafletDivIconView",_model_name:"LeafletDivIconModel",html:"",bg_pos:[0,0],icon_size:null,icon_anchor:null,popup_anchor:[0,0]}}}class qe extends He.LeafletUILayerView{create_obj(){this.obj=Je.divIcon(this.get_options())}}const Ke=i(8197),Ye=i(5195);class Xe extends Ye.LeafletControlModel{defaults(){return{...super.defaults(),_view_name:"LeafletAttributionControlView",_model_name:"LeafletAttributionControlModel"}}}class $e extends Ye.LeafletControlView{initialize(e){super.initialize(e),this.map_view=this.options.map_view}create_obj(){this.obj=Ke.control.attribution(this.get_options())}}var et=i(5195);const tt=i(1395),it=i(8197),ot=i(5195);class st extends ot.LeafletControlModel{default(){return{...super.defaults(),_view_name:"LeafletSplitMapControlView",_model_name:"LeafletSplitMapControlModel",left_layer:void 0,right_layer:void 0}}}function at(e){return Array.isArray(e)?e:[e]}st.serializers={...ot.LeafletControlModel,left_layer:{deserialize:tt.unpack_models},right_layer:{deserialize:tt.unpack_models}};class nt extends ot.LeafletControlView{initialize(e){super.initialize(e),this.map_view=this.options.map_view}create_obj(){var e=at(this.model.get("left_layer")),t=at(this.model.get("right_layer")),i=this.map_view.model.get("layers");return i=i.concat(e,t),this.map_view.layer_views.update(i).then((i=>{var o=[],s=[];i.forEach((i=>{e.includes(i.model)&&o.push(i.obj),t.includes(i.model)&&s.push(i.obj)})),this.obj=it.control.splitMap(o,s)}))}}const lt=i(8197),rt=i(5195);class dt extends rt.LeafletControlModel{defaults(){return{...super.defaults(),_view_name:"LeafletLayersControlView",_model_name:"LeafletLayersControlModel"}}}class ht extends rt.LeafletControlView{initialize(e){super.initialize(e),this.map_view=this.options.map_view}toggle_obj(){this.obj.remove(),delete this.obj,this.create_obj()}model_events(){this.listenTo(this.map_view.model,"change:layers",(()=>{this.toggle_obj()}))}create_obj(){return Promise.all(this.map_view.layer_views.views).then((e=>{var t=e.reduce((function(e,t){return t.model.get("base")&&(e[t.model.get("name")]=t.obj),e}),{}),i=e.reduce((function(e,t){return t.model.get("base")||(e[t.model.get("name")]=t.obj),e}),{});return this.obj=lt.control.layers(t,i,this.get_options()),this})).then((()=>{this.obj.addTo(this.map_view.obj)}))}}const mt=i(8197),pt=i(5195);class ct extends pt.LeafletControlModel{defaults(){return{...super.defaults(),_view_name:"LeafletMeasureControlView",_model_name:"LeafletMeasureControlModel",primary_length_unit:"feet",secondary_length_unit:void 0,primary_area_unit:"acres",secondar_area_unit:void 0,active_color:"#ABE67E",completed_color:"#C8F2BE",popup_options:{className:"leaflet-measure-resultpopup",autoPanPadding:[10,10]},capture_z_index:1e4,_custom_units:{}}}}class ut extends pt.LeafletControlView{initialize(e){super.initialize(e),this.map_view=this.options.map_view}create_obj(){this.obj=mt.control.measure(this.get_options()),this.default_units=mt.extend({},this.obj.options.units)}get_options(){const e=super.get_options();return e.units=mt.extend({},this.default_units,this.model.get("_custom_units")),e}model_events(){for(var e,t=this.model.get("options"),i=0;i<t.length;i++)e=t[i],this.listenTo(this.model,"change:"+e,(function(){this.obj.initialize(this.get_options())}),this)}}const _t=i(1395),gt=i(8197),ft=i(5195);class Lt extends ft.LeafletControlModel{defaults(){return{...super.defaults(),_view_name:"LeafletDrawControlView",_model_name:"LeafletDrawControlModel",polyline:{shapeOptions:{}},polygon:{shapeOptions:{}},circle:{},circlemarker:{},rectangle:{},marker:{},data:[],edit:!0,remove:!0}}}Lt.serializers={...ft.LeafletControlModel.serializers,layer:{deserialize:_t.unpack_models}};class vt extends ft.LeafletControlView{initialize(e){super.initialize(e),this.map_view=this.options.map_view}create_obj(){this.feature_group=gt.geoJson([],{style:function(e){return e.properties.style}}),this.data_to_layers(),this.map_view.obj.addLayer(this.feature_group);var e=this.model.get("polyline");Object.keys(e).length||(e=!1);var t=this.model.get("polygon");Object.keys(t).length||(t=!1);var i=this.model.get("circle");Object.keys(i).length||(i=!1);var o=this.model.get("circlemarker");Object.keys(o).length||(o=!1);var s=this.model.get("rectangle");Object.keys(s).length||(s=!1);var a=this.model.get("marker");Object.keys(a).length||(a=!1),this.obj=new gt.Control.Draw({position:this.model.get("position"),edit:{featureGroup:this.feature_group,edit:this.model.get("edit"),remove:this.model.get("remove")},draw:{polyline:e,polygon:t,circle:i,circlemarker:o,rectangle:s,marker:a}}),this.map_view.obj.on("draw:created",(e=>{var t=e.layer,i=t.toGeoJSON();i.properties.style=t.options,this.send({event:"draw:created",geo_json:i}),this.feature_group.addLayer(t),this.layers_to_data()})),this.map_view.obj.on("draw:edited",(e=>{e.layers.eachLayer((e=>{var t=e.toGeoJSON();t.properties.style=e.options,this.send({event:"draw:edited",geo_json:t})})),this.layers_to_data()})),this.map_view.obj.on("draw:deleted",(e=>{e.layers.eachLayer((e=>{var t=e.toGeoJSON();t.properties.style=e.options,this.send({event:"draw:deleted",geo_json:t})})),this.layers_to_data()})),this.model.on("msg:custom",this.handle_message.bind(this)),this.model.on("change:data",this.data_to_layers.bind(this))}remove(){this.map_view.obj.removeLayer(this.feature_group),this.map_view.obj.off("draw:created"),this.map_view.obj.off("draw:edited"),this.map_view.obj.off("draw:deleted"),this.model.off("msg:custom"),this.model.off("change:data")}data_to_layers(){const e=this.model.get("data");this.feature_group.clearLayers(),this.feature_group.addData(e)}layers_to_data(){let e=[];this.feature_group.eachLayer((t=>{const i=t.toGeoJSON();i.properties.style=t.options,e.push(i)})),this.model.set("data",e),this.model.save_changes()}handle_message(e){"clear"==e.msg?this.feature_group.eachLayer((e=>{this.feature_group.removeLayer(e)})):"clear_polylines"==e.msg?this.feature_group.eachLayer((e=>{e instanceof gt.Polyline&&!(e instanceof gt.Polygon)&&this.feature_group.removeLayer(e)})):"clear_polygons"==e.msg?this.feature_group.eachLayer((e=>{e instanceof gt.Polygon&&!(e instanceof gt.Rectangle)&&this.feature_group.removeLayer(e)})):"clear_circles"==e.msg?this.feature_group.eachLayer((e=>{e instanceof gt.CircleMarker&&this.feature_group.removeLayer(e)})):"clear_circle_markers"==e.msg?this.feature_group.eachLayer((e=>{e instanceof gt.CircleMarker&&!(e instanceof gt.Circle)&&this.feature_group.removeLayer(e)})):"clear_rectangles"==e.msg?this.feature_group.eachLayer((e=>{e instanceof gt.Rectangle&&this.feature_group.removeLayer(e)})):"clear_markers"==e.msg&&this.feature_group.eachLayer((e=>{e instanceof gt.Marker&&this.feature_group.removeLayer(e)})),this.layers_to_data()}}const yt=i(8197),wt=i(5195);class bt extends wt.LeafletControlModel{defaults(){return{...super.defaults(),_view_name:"LeafletFullScreenControlView",_model_name:"LeafletFullScreenControlModel"}}}class jt extends wt.LeafletControlView{initialize(e){super.initialize(e),this.map_view=this.options.map_view}create_obj(){this.obj=yt.control.fullscreen(this.get_options())}}const Mt=i(1395),xt=i(8197),Ct=i(5195),Vt=i(2720),zt=i(8832);class kt extends xt.Control{updateLayout(e){this._container&&Object.keys(e).forEach((t=>{this._container.style[t]=e[t]+"px"}))}getContent(){return this._content}setContent(e){if(this._map)return this._content=e,this._container.appendChild(this._content),this}onAdd(){return this.options.transparentBg?this._container=xt.DomUtil.create("div"):this._container=xt.DomUtil.create("div","leaflet-widgetcontrol"),xt.DomEvent.disableClickPropagation(this._container),xt.DomEvent.disableScrollPropagation(this._container),this._container}}xt.Control.WidgetControl=kt,xt.control.widgetcontrol=function(e){return new xt.Control.WidgetControl(e)};class Pt extends Ct.LeafletControlModel{defaults(){return{_view_name:"LeafletWidgetControlView",_model_name:"LeafletWidgetControlModel",widget:null,max_width:null,min_width:null,max_height:null,min_height:null,transparent_bg:!1}}}Pt.serializers={...Ct.LeafletControlModel.serializers,widget:{deserialize:Mt.unpack_models}};class Tt extends Ct.LeafletControlView{initialize(e){super.initialize(e),this.map_view=this.options.map_view,this.widget_view=void 0}set_widget(e){if(this.widget_view&&(this.widget_view.remove(),this.widget_view=void 0),e)return this.create_child_view(e).then((e=>{this.widget_view=e,this.displayed.then((()=>{this.widget_view.trigger("displayed",this),this.widget_view.displayed.then((()=>{this.updateLayout(),Vt.MessageLoop.sendMessage(e.pWidget,zt.Widget.Msg.BeforeAttach),this.obj.setContent(e.el),Vt.MessageLoop.sendMessage(e.pWidget,zt.Widget.Msg.AfterAttach)}))}))}))}create_obj(){this.obj=xt.control.widgetcontrol(this.get_options()),this.set_widget(this.model.get("widget"))}model_events(){super.model_events(),this.listenTo(this.model,"change:min_width change:min_height change:max_width change:max_height",(()=>{this.updateLayout()})),this.listenTo(this.model,"change:widget",(()=>{this.set_widget(this.model.get("widget"))}))}updateLayout(){this.obj.updateLayout({maxWidth:this.model.get("max_width"),minWidth:this.model.get("min_width"),maxHeight:this.model.get("max_height"),minHeight:this.model.get("min_height")})}}const Ot=i(8197),St=i(5195);class At extends St.LeafletControlModel{defaults(){return{...super.defaults(),_view_name:"LeafletZoomControlView",_model_name:"LeafletZoomControlModel",zoom_in_text:"+",zoom_in_title:"Zoom in",zoom_out_text:"-",zoom_out_title:"Zoom out"}}}class It extends St.LeafletControlView{initialize(e){super.initialize(e),this.map_view=this.options.map_view}create_obj(){this.obj=Ot.control.zoom(this.get_options())}}const Ut=i(8197),Dt=i(5195);class Rt extends Dt.LeafletControlModel{defaults(){return{...super.defaults(),_view_name:"LeafletScaleControlView",_model_name:"LeafletScaleControlModel"}}}class Gt extends Dt.LeafletControlView{initialize(e){super.initialize(e),this.map_view=this.options.map_view}create_obj(){this.obj=Ut.control.scale(this.get_options())}}const Et=i(8197),Wt=i(5195);class Ft extends Wt.LeafletControlModel{defaults(){return{...super.defaults(),_view_name:"LeafletLegendControlView",_model_name:"LeafletLegendControlModel",title:"Legend",legend:{"value 1":"#AAF","value 2":"#55A","value 3":"#005"},position:"bottomright"}}}class Zt extends Wt.LeafletControlView{initialize(e){super.initialize(e),this.map_view=this.options.map_view}render(){this.create_obj(),this.model.on("change:title",this.titleChanged,this),this.model.on("change:position",this.positionChanged,this),this.model.on("change:legend",this.legendChanged,this)}create_obj(){let e=Et.control({position:this.model.get("position")});e.onAdd=()=>{let e=Et.DomUtil.create("div","leaflet-control-legend");return this.addContent(e),e},this.obj=e}legendChanged(){let e=this.obj.getContainer();Et.DomUtil.empty(e),this.addContent(e)}positionChanged(){this.obj.setPosition(this.model.get("position"))}titleChanged(){this.obj.getContainer().getElementsByTagName("h4")[0].textContent=this.model.get("title")}addContent(e){let t=document.createElement("h4");t.textContent=this.model.get("title"),e.appendChild(t);let i=this.model.get("legend");for(let t in i){let o=document.createElement("i");o.style=`background-color: ${i[t]}`,e.appendChild(o),e.innerHTML+=`<p>${t} </p></br>`}}}const Bt=i(1395),Nt=i(8197),Jt=i(5195);class Ht extends Jt.LeafletControlModel{defaults(){return{...super.defaults(),_view_name:"LeafletSearchControlView",_model_name:"LeafletSearchControlModel",url:null,jsonp_param:"json_callback",property_name:"display_name",property_loc:["lat","lon"],auto_type:!1,auto_collapse:!1,zoom:null,animate_location:!1,found_style:{fillColor:"#3f0",color:"#0f0"},marker:null,layer:null}}}Ht.serializers={...Jt.LeafletControlModel.serializers,marker:{deserialize:Bt.unpack_models},layer:{deserialize:Bt.unpack_models}};class Qt extends Jt.LeafletControlView{create_obj(){const e=this.model.get("layer"),t=this.model.get("marker"),i=null!==e?this.create_child_view(e):Promise.resolve(null),o=null!==t?this.create_child_view(t):Promise.resolve(null);return Promise.all([i,o]).then((e=>{const t=e[0],i=e[1],o=this.get_options();o.layer=null!==t?t.obj:null,o.marker=null!==i&&i.obj,this.obj=Nt.control.search(o)}))}leaflet_events(){this.obj.on("search:locationfound",(e=>{if(null!==e.layer){var t=this.model.get("found_style");e.layer.setStyle(t),e.layer._popup&&e.layer.openPopup()}this.send({event:"locationfound",text:e.text,feature:null!==e.layer?e.layer.feature:null,location:[e.latlng.lat,e.latlng.lng]})}))}}const qt=i(1395),Kt=i(8197),Yt=i(3555),Xt=i(4382),$t=[0,0];class ei extends qt.StyleModel{defaults(){return{...super.defaults(),_model_name:"LeafletMapStyleModel",_model_module:"jupyter-leaflet"}}}ei.styleProperties={cursor:{selector:".leaflet-grab",attribute:"cursor",default:"grab"}};class ti extends qt.DOMWidgetModel{defaults(){return{...super.defaults(),_view_name:"LeafletMapView",_model_name:"LeafletMapModel",_model_module:"jupyter-leaflet",_view_module:"jupyter-leaflet",center:$t,zoom:12,max_zoom:null,min_zoom:null,dragging:!0,touch_zoom:!0,zoom_delta:1,zoom_snap:1,scroll_wheel_zoom:!1,double_click_zoom:!0,box_zoom:!0,tap:!0,tap_tolerance:15,world_copy_jump:!1,close_popup_on_click:!0,bounce_at_zoom_limits:!0,keyboard:!0,keyboard_pan_offset:80,keyboard_zoom_offset:1,inertia:!0,inertia_deceleration:3e3,inertia_max_speed:1500,zoom_animation_threshold:4,south:$t[0],north:$t[0],east:$t[1],west:$t[1],bottom:0,top:9007199254740991,right:0,left:9007199254740991,options:[],panes:{},layers:[],controls:[],crs:{name:"EPSG3857",custom:!1},style:null,default_style:null,dragging_style:null}}initialize(e,t){super.initialize(e,t),this.set("window_url",window.location.href),this._dragging=!1}update_style(){var e;e=this._dragging?this.get("dragging_style"):this.get("default_style"),this.set("style",e)}update_bounds(){return qt.resolvePromisesDict(this.views).then((e=>{var t={north:-90,south:90,east:-1/0,west:1/0},i={top:9007199254740991,bottom:0,right:0,left:9007199254740991};Object.keys(e).reduce((function(t,i){var o=t[0],s=t[1],a=e[i].obj;if(a){var n=a.getBounds();o.north=Math.max(o.north,n.getNorth()),o.south=Math.min(o.south,n.getSouth()),o.east=Math.max(o.east,n.getEast()),o.west=Math.min(o.west,n.getWest());var l=a.getPixelBounds(),r=l.getTopLeft(),d=l.getBottomRight();s.top=Math.min(s.top,r.y),s.bottom=Math.max(s.bottom,d.y),s.right=Math.max(s.right,d.x),s.left=Math.min(s.left,r.x)}return[o,s]}),[t,i]),this.set("north",t.north),this.set("south",t.south),this.set("east",t.east),this.set("west",t.west),this.set("top",i.top),this.set("bottom",i.bottom),this.set("right",i.right),this.set("left",i.left)}))}}ti.serializers={...qt.DOMWidgetModel.serializers,layers:{deserialize:qt.unpack_models},controls:{deserialize:qt.unpack_models},style:{deserialize:qt.unpack_models},default_style:{deserialize:qt.unpack_models},dragging_style:{deserialize:qt.unpack_models}};class ii extends Yt.LeafletDOMWidgetView{initialize(e){super.initialize(e),this.dirty=!1}create_panes(){const e=this.model.get("panes");for(const t in e){const i=this.obj.createPane(t),o=e[t];for(const e in o)i.style[e]=o[e]}}remove_layer_view(e){this.obj.removeLayer(e.obj),e.remove()}add_layer_model(e){return this.create_child_view(e,{map_view:this}).then((e=>(this.obj.addLayer(e.obj),this.displayed.then((()=>{e.trigger("displayed",this)})),e)))}remove_control_view(e){this.obj.removeControl(e.obj),e.remove()}add_control_model(e){return this.create_child_view(e,{map_view:this}).then((e=>(this.obj.addControl(e.obj),this.displayed.then((()=>{e.trigger("displayed",this)})),e)))}render(){super.render(),this.el.classList.add("jupyter-widgets"),this.el.classList.add("leaflet-widgets"),this.map_container=document.createElement("div"),this.map_child=this.el.appendChild(this.map_container),"nearest"==this.get_options().interpolation&&this.map_container.classList.add("crisp-image"),this.layer_views=new qt.ViewList(this.add_layer_model,this.remove_layer_view,this),this.control_views=new qt.ViewList(this.add_control_model,this.remove_control_view,this),this.displayed.then(this.render_leaflet.bind(this))}render_leaflet(){this.create_obj().then((()=>(this.create_panes(),this.layer_views.update(this.model.get("layers")),this.control_views.update(this.model.get("controls")),this.leaflet_events(),this.model_events(),this.model.update_bounds().then((()=>{this.touch()})),this)))}create_obj(){return this.layoutPromise.then((()=>{var e={...this.get_options(),crs:Xt.getProjection(this.model.get("crs")),zoomControl:!1,attributionControl:!1};this.obj=Kt.map(this.map_container,e)}))}rerender(){this.obj.remove(),delete this.obj,this.el.removeChild(this.map_child),this.render()}leaflet_events(){this.obj.on("moveend",(e=>{if(!this.dirty){this.dirty=!0;var t=e.target.getCenter();this.model.set("center",[t.lat,t.lng]),this.dirty=!1}this.model.update_bounds().then((()=>{this.touch()})),this.model._dragging=!1,this.model.update_style()})),this.obj.on("movestart",(()=>{this.model._dragging=!0,this.model.update_style()})),this.obj.on("zoomend",(e=>{if(!this.dirty){this.dirty=!0;var t=e.target.getZoom();this.model.set("zoom",t),this.dirty=!1}this.model.update_bounds().then((()=>{this.touch()}))})),this.obj.on("click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu preclick",(e=>{this.send({event:"interaction",type:e.type,coordinates:[e.latlng.lat,e.latlng.lng],location:this.model.get("location")})})),this.obj.on("fullscreenchange",(()=>{this.model.set("fullscreen",this.obj.isFullscreen())}))}model_events(){for(var e,t=this.model.get("options"),i=0;i<t.length;i++)e=t[i],this.listenTo(this.model,"change:"+e,(function(){Kt.setOptions(this.obj,this.get_options())}),this);this.listenTo(this.model,"msg:custom",this.handle_msg,this),this.listenTo(this.model,"change:panes",this.rerender,this),this.listenTo(this.model,"change:dragging",(function(){this.model.get("dragging")?this.obj.dragging.enable():this.obj.dragging.disable()}),this),this.listenTo(this.model,"change:layers",(function(){this.layer_views.update(this.model.get("layers"))}),this),this.listenTo(this.model,"change:controls",(function(){this.control_views.update(this.model.get("controls"))}),this),this.listenTo(this.model,"change:zoom",(function(){this.dirty||(this.dirty=!0,this.obj.flyTo(this.model.get("center"),this.model.get("zoom"),{animate:!1}),this.dirty=!1),this.model.update_bounds().then((()=>{this.touch()}))}),this),this.listenTo(this.model,"change:center",(function(){this.dirty||(this.dirty=!0,this.obj.panTo(this.model.get("center")),this.dirty=!1),this.model.update_bounds().then((()=>{this.touch()}))}),this),this.listenTo(this.model,"change:dragging_style",(function(){this.model.update_style()}),this),this.listenTo(this.model,"change:default_style",(function(){this.model.update_style()}),this),this.listenTo(this.model,"change:fullscreen",(function(){var e=this.model.get("fullscreen");this.obj.isFullscreen()!==e&&this.obj.toggleFullscreen()}),this)}handle_msg(e){e.method}processPhosphorMessage(e){this._processLuminoMessage(e,super.processPhosphorMessage)}processLuminoMessage(e){this._processLuminoMessage(e,super.processLuminoMessage)}_processLuminoMessage(e,t){switch(t.call(this,e),e.type){case"resize":this.dirty=!0,this.obj.invalidateSize({animate:!1,pan:!0}),this.dirty=!1;break;case"after-show":if(this.dirty=!0,!this.obj)return;this.obj.invalidateSize({animate:!1,pan:!0}),this.dirty=!1}}}i(623),i(3302),i(4438),i(7256),i(8618),i(9800),i(7873),i(8359),i(3400),i(907),i(3976)},587:(e,t,i)=>{"use strict";i.r(t),i.d(t,{LeafletCircleMarkerModel:()=>n,LeafletCircleMarkerView:()=>l});const o=i(8197),s=i(5529),a=[0,0];class n extends s.LeafletPathModel{defaults(){return{...super.defaults(),_view_name:"LeafletCircleMarkerView",_model_name:"LeafletCircleMarkerModel",location:a}}}class l extends s.LeafletPathView{create_obj(){this.obj=o.circleMarker(this.model.get("location"),this.get_options())}model_events(){super.model_events(),this.listenTo(this.model,"change:location",(function(){this.obj.setLatLng(this.model.get("location"))}),this)}}},3090:(e,t,i)=>{"use strict";i.r(t),i.d(t,{LeafletFeatureGroupModel:()=>a,LeafletFeatureGroupView:()=>n});const o=i(8197),s=i(6464);class a extends s.LeafletLayerGroupModel{defaults(){return{...super.defaults(),_view_name:"LeafletFeatureGroupView",_model_name:"LeafletFeatureGroupModel"}}}class n extends s.LeafletLayerGroupView{create_obj(){this.obj=o.featureGroup()}}},4795:(e,t,i)=>{"use strict";i.r(t),i.d(t,{LeafletLayerModel:()=>r,LeafletLayerView:()=>h,LeafletUILayerModel:()=>d,LeafletUILayerView:()=>m});const o=i(1395),s=i(2720),a=i(8832),n=i(8197),l=i(3555);class r extends o.WidgetModel{defaults(){return{...super.defaults(),_view_name:"LeafletLayerView",_model_name:"LeafletLayerModel",_view_module:"jupyter-leaflet",_model_module:"jupyter-leaflet",opacity:1,bottom:!1,options:[],name:"",base:!1,popup:null,popup_min_width:50,popup_max_width:300,popup_max_height:null,pane:"",subitems:[]}}}r.serializers={...o.WidgetModel.serializers,popup:{deserialize:o.unpack_models},subitems:{deserialize:o.unpack_models}};class d extends r{defaults(){return{...super.defaults(),_view_name:"LeafletUILayerView",_model_name:"LeafletUILayerModel"}}}class h extends l.LeafletWidgetView{initialize(e){super.initialize(e),this.map_view=this.options.map_view,this.popup_content_promise=Promise.resolve()}remove_subitem_view(e){e instanceof h?this.map_view.obj.removeLayer(e.obj):this.map_view.obj.removeControl(e.obj),e.remove()}add_subitem_model(e){return this.create_child_view(e,{map_view:this}).then((t=>(e instanceof r?this.map_view.obj.addLayer(t.obj):this.map_view.obj.addControl(t.obj),this.displayed.then((()=>{t.trigger("displayed",this)})),t)))}render(){return Promise.resolve(this.create_obj()).then((()=>{this.leaflet_events(),this.model_events(),this.bind_popup(this.model.get("popup")),this.listenTo(this.model,"change:popup",(function(e,t){this.bind_popup(t)})),this.update_pane(),this.subitem_views=new o.ViewList(this.add_subitem_model,this.remove_subitem_view,this),this.subitem_views.update(this.model.get("subitems"))}))}update_pane(){const e=this.model.get("pane");""!==e&&n.setOptions(this.obj,{pane:e})}leaflet_events(){this.obj.on&&(this.obj.on("click dblclick mousedown mouseup mouseover mouseout",(e=>{this.send({event:"interaction",type:e.type,coordinates:[e.latlng.lat,e.latlng.lng]})})),this.obj.on("popupopen",(()=>{window.dispatchEvent(new Event("resize"))})),this.obj.transform&&(this.obj.on("add",(()=>{this.update_transform()})),this.obj.on("transformed",(()=>{this.model.set("locations",this.obj.getLatLngs()),this.touch()}))))}model_events(){for(var e,t=this.model.get("options"),i=0;i<t.length;i++)e=t[i],this.listenTo(this.model,"change:"+e,(function(){n.setOptions(this.obj,this.get_options())}),this);this.model.on_some_change(["popup_min_width","popup_max_width","popup_max_height"],this.update_popup,this),this.listenTo(this.model,"change:pane",(function(){this.map_view.rerender()}),this),this.listenTo(this.model,"change:subitems",(function(){this.subitem_views.update(this.subitems)}),this)}remove(){super.remove(),this.subitem_views.remove(),this.popup_content_promise.then((()=>{this.popup_content&&this.popup_content.remove()}))}bind_popup(e){return this.popup_content&&(this.obj.unbindPopup(),this.popup_content.remove()),e&&(this.popup_content_promise=this.popup_content_promise.then((()=>this.create_child_view(e,{map_view:this.map_view}).then((t=>{"LeafletPopupModel"==e.name?this.obj.bindPopup(t.obj,this.popup_options()):(s.MessageLoop.sendMessage(t.pWidget,a.Widget.Msg.BeforeAttach),this.obj.bindPopup(t.el,this.popup_options()),s.MessageLoop.sendMessage(t.pWidget,a.Widget.Msg.AfterAttach)),this.popup_content=t,this.trigger("popup_content:created")}))))),this.popup_content_promise}popup_options(){return{minWidth:this.model.get("popup_min_width"),maxWidth:this.model.get("popup_max_width"),maxHeight:this.model.get("popup_max_height")}}update_popup(){n.setOptions(this.obj.getPopup(),this.popup_options()),this.obj.togglePopup(),this.obj.togglePopup()}}class m extends h{}},6464:(e,t,i)=>{"use strict";i.r(t),i.d(t,{LeafletLayerGroupModel:()=>n,LeafletLayerGroupView:()=>l});const o=i(1395),s=i(8197),a=i(4795);class n extends a.LeafletLayerModel{defaults(){return{...super.defaults(),_view_name:"LeafletLayerGroupView",_model_name:"LeafletLayerGroupModel",layers:[]}}}n.serializers={...a.LeafletLayerModel.serializers,layers:{deserialize:o.unpack_models}};class l extends a.LeafletLayerView{create_obj(){this.obj=s.layerGroup(),this.layer_views=new o.ViewList(this.add_layer_model,this.remove_layer_view,this),this.layer_views.update(this.model.get("layers"))}remove_layer_view(e){this.obj.removeLayer(e.obj),e.remove()}add_layer_model(e){return this.create_child_view(e).then((e=>(this.obj.addLayer(e.obj),e)))}model_events(){this.listenTo(this.model,"change:layers",(function(){this.layer_views.update(this.model.get("layers"))}),this)}}},5529:(e,t,i)=>{"use strict";i.r(t),i.d(t,{LeafletPathModel:()=>s,LeafletPathView:()=>a});const o=i(2610);class s extends o.LeafletVectorLayerModel{defaults(){return{...super.defaults(),_view_name:"LeafletPathView",_model_name:"LeafletPathModel",stroke:!0,color:"#0033FF",weight:5,fill:!0,fill_color:null,fill_opacity:.2,dash_array:null,line_cap:"round",line_join:"round",pointer_events:""}}}class a extends o.LeafletVectorLayerView{model_events(){var e;super.model_events();for(var t=this.model.get("options"),i=0;i<t.length;i++)e=t[i],this.listenTo(this.model,"change:"+e,(function(){this.obj.setStyle(this.get_options())}),this)}}},5321:(e,t,i)=>{"use strict";i.r(t),i.d(t,{LeafletPolygonModel:()=>a,LeafletPolygonView:()=>n});var o=i(8197),s=i(9770);class a extends s.LeafletPolylineModel{defaults(){return{...super.defaults(),_view_name:"LeafletPolygonView",_model_name:"LeafletPolygonModel"}}}class n extends s.LeafletPolylineView{create_obj(){this.obj=o.polygon(this.model.get("locations"),this.get_options())}}},9770:(e,t,i)=>{"use strict";i.r(t),i.d(t,{LeafletPolylineModel:()=>a,LeafletPolylineView:()=>n});const o=i(8197),s=i(5529);class a extends s.LeafletPathModel{defaults(){return{...super.defaults(),_view_name:"LeafletPolylineView",_model_name:"LeafletPolylineModel",locations:[],smooth_factor:1,no_clip:!0}}}class n extends s.LeafletPathView{create_obj(){this.obj=o.polyline(this.model.get("locations"),this.get_options())}model_events(){super.model_events(),this.listenTo(this.model,"change:locations",(function(){this.obj.setLatLngs(this.model.get("locations")),this.obj.transform&&this.obj.transform.reset()}),this),this.model.on_some_change(["scaling","uniform_scaling","rotation"],this.update_transform,this),this.listenTo(this.model,"change:draggable",(()=>{this.obj.dragging&&this.obj.dragging[this.model.get("draggable")?"enable":"disable"]()}),this),this.listenTo(this.model,"change:transform",(()=>{this.obj.transform&&this.obj.transform[this.model.get("transform")?"enable":"disable"]()}),this)}update_transform(){this.obj.transform&&this.obj.transform.setOptions({scaling:this.model.get("scaling"),uniformScaling:this.model.get("uniform_scaling"),rotation:this.model.get("rotation")}).enable()}}},6004:(e,t,i)=>{"use strict";i.r(t),i.d(t,{LeafletRasterLayerModel:()=>s,LeafletRasterLayerView:()=>a});const o=i(4795);class s extends o.LeafletLayerModel{defaults(){return{...super.defaults(),_view_name:"LeafletRasterLayerView",_model_name:"LeafletRasterLayerModel",visible:!0}}}class a extends o.LeafletLayerView{model_events(){super.model_events(),this.listenTo(this.model,"change:opacity",(function(){this.model.get("visible")&&this.obj.setOpacity(this.model.get("opacity"))}),this),this.listenTo(this.model,"change:visible",(function(){this.model.get("visible")?this.obj.setOpacity(this.model.get("opacity")):this.obj.setOpacity(0)}),this),this.model.get("visible")?this.obj.setOpacity(this.model.get("opacity")):this.obj.setOpacity(0)}}},6231:(e,t,i)=>{"use strict";i.r(t),i.d(t,{LeafletTileLayerModel:()=>n,LeafletTileLayerView:()=>l});const o=i(8197),s=i(6004),a=i(1235).Spinner;class n extends s.LeafletRasterLayerModel{defaults(){return{...super.defaults(),_view_name:"LeafletTileLayerView",_model_name:"LeafletTileLayerModel",bottom:!0,url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",min_zoom:0,max_zoom:18,min_native_zoom:null,max_native_zoom:null,bounds:null,tile_size:256,attribution:null,detect_retina:!1,no_wrap:!1,tms:!1,show_loading:!1,loading:!1,zoom_offset:0}}}class l extends s.LeafletRasterLayerView{create_obj(){this.obj=o.tileLayer(this.model.get("url"),this.get_options()),this.model.on("msg:custom",this.handle_message.bind(this))}leaflet_events(){super.leaflet_events(),this.obj.on("loading",(()=>{this.model.set("loading",!0),this.model.save_changes(),this.model.get("show_loading")&&(this.spinner=(new a).spin(this.map_view.el))})),this.obj.on("load",(()=>{this.model.set("loading",!1),this.model.save_changes(),this.send({event:"load"}),this.model.get("show_loading")&&this.spinner.stop()})),this.obj.on("remove",(()=>{this.model.get("show_loading")&&this.spinner.stop()}))}model_events(){super.model_events(),this.listenTo(this.model,"change:url",(function(){this.obj.setUrl(this.model.get("url"),!0),this.obj.refresh()}),this)}handle_message(e){"redraw"==e.msg&&this.obj.redraw()}}},2610:(e,t,i)=>{"use strict";i.r(t),i.d(t,{LeafletVectorLayerModel:()=>s,LeafletVectorLayerView:()=>a});const o=i(4795);class s extends o.LeafletLayerModel{defaults(){return{...super.defaults(),_view_name:"LeafletVectorLayerView",_model_name:"LeafletVectorLayerModel"}}}class a extends o.LeafletLayerView{}},7859:()=>{"use strict";function e(t){if(!(this instanceof e))return new e(t);this._canvas=t="string"==typeof t?document.getElementById(t):t,this._ctx=t.getContext("2d"),this._width=t.width,this._height=t.height,this._max=1,this._data=[]}e.prototype={defaultRadius:25,defaultGradient:{.4:"blue",.6:"cyan",.7:"lime",.8:"yellow",1:"red"},data:function(e){return this._data=e,this},max:function(e){return this._max=e,this},add:function(e){return this._data.push(e),this},clear:function(){return this._data=[],this},radius:function(e,t){t=void 0===t?15:t;var i=this._circle=this._createCanvas(),o=i.getContext("2d"),s=this._r=e+t;return i.width=i.height=2*s,o.shadowOffsetX=o.shadowOffsetY=2*s,o.shadowBlur=t,o.shadowColor="black",o.beginPath(),o.arc(-s,-s,e,0,2*Math.PI,!0),o.closePath(),o.fill(),this},resize:function(){this._width=this._canvas.width,this._height=this._canvas.height},gradient:function(e){var t=this._createCanvas(),i=t.getContext("2d"),o=i.createLinearGradient(0,0,0,256);for(var s in t.width=1,t.height=256,e)o.addColorStop(+s,e[s]);return i.fillStyle=o,i.fillRect(0,0,1,256),this._grad=i.getImageData(0,0,1,256).data,this},draw:function(e){this._circle||this.radius(this.defaultRadius),this._grad||this.gradient(this.defaultGradient);var t=this._ctx;t.clearRect(0,0,this._width,this._height);for(var i,o=0,s=this._data.length;o<s;o++)i=this._data[o],t.globalAlpha=Math.min(Math.max(i[2]/this._max,void 0===e?.05:e),1),t.drawImage(this._circle,i[0]-this._r,i[1]-this._r);var a=t.getImageData(0,0,this._width,this._height);return this._colorize(a.data,this._grad),t.putImageData(a,0,0),this},_colorize:function(e,t){for(var i,o=0,s=e.length;o<s;o+=4)(i=4*e[o+3])&&(e[o]=t[i],e[o+1]=t[i+1],e[o+2]=t[i+2])},_createCanvas:function(){return"undefined"!=typeof document?document.createElement("canvas"):new this._canvas.constructor}},L.HeatLayer=(L.Layer?L.Layer:L.Class).extend({options:{minOpacity:.05,maxZoom:18,radius:25,blur:15,max:1},initialize:function(e,t){this._latlngs=e,L.setOptions(this,t)},setLatLngs:function(e){return this._latlngs=e,this.redraw()},addLatLng:function(e){return this._latlngs.push(e),this.redraw()},setOptions:function(e){return L.setOptions(this,e),this._heat&&this._updateOptions(),this.redraw()},redraw:function(){return this._heat&&!this._frame&&this._map&&!this._map._animating&&(this._frame=L.Util.requestAnimFrame(this._redraw,this)),this},onAdd:function(e){this._map=e,this._canvas||this._initCanvas(),this.options.pane?this.getPane().appendChild(this._canvas):e._panes.overlayPane.appendChild(this._canvas),e.on("moveend",this._reset,this),e.options.zoomAnimation&&L.Browser.any3d&&e.on("zoomanim",this._animateZoom,this),this._reset()},onRemove:function(e){this.options.pane?this.getPane().removeChild(this._canvas):e.getPanes().overlayPane.removeChild(this._canvas),e.off("moveend",this._reset,this),e.options.zoomAnimation&&e.off("zoomanim",this._animateZoom,this)},addTo:function(e){return e.addLayer(this),this},_initCanvas:function(){var t=this._canvas=L.DomUtil.create("canvas","leaflet-heatmap-layer leaflet-layer"),i=L.DomUtil.testProp(["transformOrigin","WebkitTransformOrigin","msTransformOrigin"]);t.style[i]="50% 50%";var o=this._map.getSize();t.width=o.x,t.height=o.y;var s=this._map.options.zoomAnimation&&L.Browser.any3d;L.DomUtil.addClass(t,"leaflet-zoom-"+(s?"animated":"hide")),this._heat=e(t),this._updateOptions()},_updateOptions:function(){this._heat.radius(this.options.radius||this._heat.defaultRadius,this.options.blur),this.options.gradient&&this._heat.gradient(this.options.gradient),this.options.max&&this._heat.max(this.options.max)},_reset:function(){var e=this._map.containerPointToLayerPoint([0,0]);L.DomUtil.setPosition(this._canvas,e);var t=this._map.getSize();this._heat._width!==t.x&&(this._canvas.width=this._heat._width=t.x),this._heat._height!==t.y&&(this._canvas.height=this._heat._height=t.y),this._redraw()},_redraw:function(){if(this._map){var e,t,i,o,s,a,n,l,r,d=[],h=this._heat._r,m=this._map.getSize(),p=new L.Bounds(L.point([-h,-h]),m.add([h,h])),c=void 0===this.options.max?1:this.options.max,u=void 0===this.options.maxZoom?this._map.getMaxZoom():this.options.maxZoom,_=1/Math.pow(2,Math.max(0,Math.min(u-this._map.getZoom(),12))),g=h/2,f=[],v=this._map._getMapPanePos(),y=v.x%g,w=v.y%g;for(e=0,t=this._latlngs.length;e<t;e++)i=this._map.latLngToContainerPoint(this._latlngs[e]),p.contains(i)&&(s=Math.floor((i.x-y)/g)+2,a=Math.floor((i.y-w)/g)+2,r=(void 0!==this._latlngs[e].alt?this._latlngs[e].alt:void 0!==this._latlngs[e][2]?+this._latlngs[e][2]:1)*_,f[a]=f[a]||[],(o=f[a][s])?(o[0]=(o[0]*o[2]+i.x*r)/(o[2]+r),o[1]=(o[1]*o[2]+i.y*r)/(o[2]+r),o[2]+=r):f[a][s]=[i.x,i.y,r]);for(e=0,t=f.length;e<t;e++)if(f[e])for(n=0,l=f[e].length;n<l;n++)(o=f[e][n])&&d.push([Math.round(o[0]),Math.round(o[1]),Math.min(o[2],c)]);this._heat.data(d).draw(this.options.minOpacity),this._frame=null}},_animateZoom:function(e){var t=this._map.getZoomScale(e.zoom),i=this._map._getCenterOffset(e.center)._multiplyBy(-t).subtract(this._map._getMapPanePos());L.DomUtil.setTransform?L.DomUtil.setTransform(this._canvas,i,t):this._canvas.style[L.DomUtil.TRANSFORM]=L.DomUtil.getTranslateString(i)+" scale("+t+")"}}),L.heatLayer=function(e,t){return new L.HeatLayer(e,t)}},3645:()=>{L.ImageService=L.Layer.extend({options:{url:"",f:"image",format:"jpgpng",pixelType:"UNKNOWN",noData:[],noDataInterpretation:"",interpolation:"",compressionQuality:"",bandIds:[],time:[],renderingRule:{},mosaicRule:{},endpoint:"",attribution:"",crs:null,interactive:!1,updateInterval:200},initialize:function(e){L.Util.setOptions(this,e)},updateUrl:function(){return"Esri"===this.options.endpoint?this._url=this.options.url+"/exportImage"+this._buildParams():this._url=this.options.url,this._bounds=this.toLatLngBounds(this._getBounds()),this._topLeft=this._map.getPixelBounds().min,this},onAdd:function(e){this._map=e,this.updateUrl(),this._image||this._initImage(),this._map.on("moveend",(()=>{L.Util.throttle(this._update(),this.options.updateInterval,this)})),this.options.interactive&&(L.DomUtil.addClass(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){L.DomUtil.remove(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},bringToFront:function(){return this._map&&L.DomUtil.toFront(this._image),this},bringToBack:function(){return this._map&&L.DomUtil.toBack(this._image),this},setUrl:function(e){return"Esri"===this.options.endpoint?this._url=e+"/exportImage"+this._buildParams():this._url=e,this._image&&(this._image.src=e),this},getEvents:function(){return{zoom:this._reset,viewreset:this._reset}},getBounds:function(){return this._bounds},toLatLngBounds:function(e,t){return e instanceof L.LatLngBounds?e:new L.LatLngBounds(e,t)},getElement:function(){return this._image},getCenter:function(){return this._bounds.getCenter()},_getBBox:function(){var e=this._map.getPixelBounds(),t=this._map.unproject(e.getBottomLeft()),i=this._map.unproject(e.getTopRight());return[this._map.options.crs.project(i).x,this._map.options.crs.project(i).y,this._map.options.crs.project(t).x,this._map.options.crs.project(t).y]},_getBounds:function(){return[[this._map.getBounds().getSouth(),this._map.getBounds().getWest()],[this._map.getBounds().getNorth(),this._map.getBounds().getEast()]]},_getSize:function(){var e=this._map.getSize();return[e.x,e.y]},_getEPSG:function(){var e=this.options.crs.code;return parseInt(e.split(":")[1],10)},_getTime:function(){return[new Date(this.options.time[0]).getTime().valueOf(),new Date(this.options.time[1]).getTime().valueOf()]},_buildParams:function(){var e={bbox:this._getBBox().join(","),size:this._getSize().join(","),bboxSR:this._getEPSG(),imageSR:this._getEPSG(),f:this.options.f};return this.options.format&&(e.format=this.options.format),this.options.pixelType&&(e.pixelType=this.options.pixelType),this.options.noDataInterpretation&&(e.noDataInterpretation=this.options.noDataInterpretation),this.options.interpolation&&(e.interpolation=this.options.interpolation),this.options.compressionQuality&&(e.compressionQuality=this.options.compressionQuality),this.options.noData.length&&(e.noData=this.options.noData.join(",")),this.options.bandIds.length&&(e.bandIds=this.options.bandIds.join(",")),this.options.time.length&&(e.time=this._getTime().join(",")),Object.keys(this.options.renderingRule).length&&(e.renderingRule=JSON.stringify(this.options.renderingRule)),Object.keys(this.options.mosaicRule).length&&(e.mosaicRule=JSON.stringify(this.options.mosaicRule)),L.Util.getParamString(e)},_initImage:function(){var e="IMG"===this._url.tagName,t=this._image=L.DomUtil.create("img");L.DomUtil.addClass(t,"leaflet-image-layer"),t.onselectstart=L.Util.falseFn,t.onmousemove=L.Util.falseFn,t.onload=L.Util.bind(this.fire,this,"load"),e?this._url=t.src:t.src=this._url},_reset:function(){var e=this._image,t=this._getSize();if(e.style.width=t[0]+"px",e.style.height=t[1]+"px",3857===this._getEPSG()){var i=new L.Bounds(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast()));L.DomUtil.setPosition(e,i.min)}else{var o=this._topLeft.subtract(this._map.getPixelOrigin());L.DomUtil.setPosition(e,o)}},_update:function(){this._map&&(this._map._panTransition&&this._map._panTransition._inProgress||(this.updateUrl(),this._image&&this._map&&(this._image.src=this._url,this._reset())))}}),L.imageService=function(e){return new L.ImageService(e)}},5650:()=>{L.MagnifyingGlass=L.Layer.extend({options:{radius:100,zoomOffset:3,layers:[],fixedPosition:!1,latLng:[0,0],fixedZoom:-1},initialize:function(e){L.Util.setOptions(this,e),this._fixedZoom=-1!=this.options.fixedZoom,this._mainMap=null,this._glassMap=null},getMap:function(){return this._glassMap},_createMiniMap:function(e){return new L.Map(e,{layers:this.options.layers,zoom:this._getZoom(),maxZoom:this._mainMap.getMaxZoom(),minZoom:this._mainMap.getMinZoom(),crs:this._mainMap.options.crs,fadeAnimation:!1,attributionControl:!1,zoomControl:!1,boxZoom:!1,touchZoom:!1,scrollWheelZoom:!1,doubleClickZoom:!1,dragging:!1,keyboard:!1})},_getZoom:function(){return this._fixedZoom?this.options.fixedZoom:this._mainMap.getZoom()+this.options.zoomOffset},_updateZoom:function(){this._glassMap.setZoom(this._getZoom())},setRadius:function(e){this.options.radius=e,this._wrapperElt&&(this._wrapperElt.style.width=2*this.options.radius+"px",this._wrapperElt.style.height=2*this.options.radius+"px")},setLatLng:function(e){this.options.latLng=e,this._update(e)},_updateFromMouse:function(e){this._update(e.latlng,e.layerPoint)},_updateFixed:function(){this._update(this.options.latLng)},_update:function(e,t){this._glassMap.setView(e,this._getZoom(),{pan:{animate:!1}}),t=t||this._mainMap.latLngToLayerPoint(e),this._wrapperElt.style.left=t.x-this.options.radius+"px",this._wrapperElt.style.top=t.y-this.options.radius+"px"},onAdd:function(e){this._mainMap=e,this._wrapperElt=L.DomUtil.create("div","leaflet-magnifying-glass");var t=L.DomUtil.create("div","",this._wrapperElt);L.Browser.webkit&&L.DomUtil.addClass(t,"leaflet-magnifying-glass-webkit"),this._glassMap=this._createMiniMap(t),L.DomEvent.addListener(this._wrapperElt,"click",this._fireClick,this);var i=this.options;return this.setRadius(i.radius),this.setLatLng(i.latLng),this._glassMap.whenReady((function(){i.fixedPosition?(this._mainMap.on("zoomend",this._updateFixed,this),L.DomUtil.addClass(this._wrapperElt,"leaflet-zoom-hide")):(this._mainMap.on("mousemove",this._updateFromMouse,this),this._fixedZoom||this._mainMap.on("zoomend",this._updateZoom,this))}),this),e.getPanes().popupPane.appendChild(this._wrapperElt),this._glassMap.invalidateSize(),this},_fireClick:function(e){this.fire("click",e),L.DomEvent.stopPropagation(e)},onRemove:function(e){e.off("viewreset",this._updateFixed,this),e.off("mousemove",this._updateFromMouse,this),e.off("zoomend",this._updateZoom,this);for(var t=0,i=this.options.layers.length;t<i;t++)this._glassMap.removeLayer(this.options.layers[t]);return this._glassMap.remove(),L.DomEvent.removeListener(this._wrapperElt,"click",this._fireClick),e.getPanes().popupPane.removeChild(this._wrapperElt),this._mainMap=null,this}}),L.magnifyingGlass=function(e){return new L.MagnifyingGlass(e)}},8197:(e,t,i)=>{const o=i(1795);i(445),i(8249),i(860),i(3950),i(7600),i(4519),i(1834),i(6753),i(6336),i(7859),i(3645),i(5650),i(1509),i(6843),i(474),i(356),i(9574),o.patchGridLayer=function(e){e._refreshTileUrl=function(e,t){var i=new Image;i.onload=function(){o.Util.requestAnimFrame((function(){e.el.src=t}))},i.src=t},e.refresh=function(){var e=this._map._fadeAnimated;for(var t in this._map._fadeAnimated=!1,this._tiles){var i=this._tiles[t];if(i.current&&i.active){var o=i.el.src,s=this.getTileUrl(i.coords);o!=s&&this._refreshTileUrl(i,s)}}e&&setTimeout((function(){this._map._fadeAnimated=e}),5e3)}};var s=o.tileLayer;o.tileLayer=function(e,t){var i=s(e,t);return o.patchGridLayer(i),i},o.tileLayer.wms=function(e,t){var i=s.wms(e,t);return o.patchGridLayer(i),i},e.exports=o},4382:(e,t,i)=>{"use strict";i.r(t),i.d(t,{getProjection:()=>s});const o=i(8197);function s(e){return!1===e.custom?o.CRS[e.name]:new o.Proj.CRS(e.name,e.proj4def,{origin:e.origin,resolutions:e.resolutions,bounds:o.Bounds(e.bounds)})}},3555:(e,t,i)=>{"use strict";i.r(t),i.d(t,{LeafletDOMWidgetView:()=>a,LeafletWidgetView:()=>s});const o=i(1395);class s extends o.WidgetView{}class a extends o.DOMWidgetView{}class n{get_options(){for(var e,t,i=this.model.get("options"),o={},s=0;s<i.length;s++)e=i[s],null!==this.model.get(e)&&(o[(t=e,t.toLowerCase().replace(/_(.)/g,(function(e,t){return t.toUpperCase()})))]=this.model.get(e));return o}}function l(e,t){t.forEach((t=>{Object.getOwnPropertyNames(t.prototype).forEach((i=>{Object.defineProperty(e.prototype,i,Object.getOwnPropertyDescriptor(t.prototype,i))}))}))}l(s,[n]),l(a,[n])},4147:e=>{"use strict";e.exports={version:"0.17.4"}}}]);